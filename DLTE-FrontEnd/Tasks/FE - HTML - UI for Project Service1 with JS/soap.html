<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOAP Web Service UI</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">
    <h1>Customer Details</h1>
    <div id="customerCards" class="row mt-3"></div>
</div>

<!-- Bootstrap JS and your custom JavaScript -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // Function to make SOAP web service call and update UI
    function fetchCustomerDetails(customerId) {
        // SOAP XML request body
        const soapRequest = `
            <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://example.com/services">
                <soapenv:Header/>
                <soapenv:Body>
                    <ser:GetCustomerDetailsRequest>
                        <customerId>${customerId}</customerId>
                    </ser:GetCustomerDetailsRequest>
                </soapenv:Body>
            </soapenv:Envelope>
        `;
        
        // Make SOAP web service call using Fetch API
        fetch('http://account.services', {
            method: 'POST',
            headers: {
                'Content-Type': 'text/xml'
            },
            body: soapRequest
        })
        .then(response => response.text())
        .then(data => {
            // Parse XML response
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(data, 'text/xml');
            const customerNodes = xmlDoc.getElementsByTagName('Customer');
            
            // Convert XML data to JSON
            const customers = [];
            for (let i = 0; i < customerNodes.length; i++) {
                const customer = {
                    customerId: customerNodes[i].getElementsByTagName('customerId')[0].textContent,
                    customerName: customerNodes[i].getElementsByTagName('customerName')[0].textContent,
                    customerAddress: customerNodes[i].getElementsByTagName('customerAddress')[0].textContent,
                    customerStatus: customerNodes[i].getElementsByTagName('customerStatus')[0].textContent
                    // Add more fields as needed
                };
                customers.push(customer);
            }
            
            // Update UI with customer data
            updateUI(customers);
        })
        .catch(error => {
            console.error('Error fetching customer details:', error);
            // Display error message in UI
            // Example: document.getElementById('errorMessage').innerText = 'Error fetching customer details';
        });
    }

    // Function to update UI with customer data
    function updateUI(customers) {
        const customerCardsContainer = document.getElementById('customerCards');
        // Clear previous content
        customerCardsContainer.innerHTML = '';

        // Iterate through customer data and create cards
        customers.forEach(customer => {
            const cardHtml = `
                <div class="col-md-4">
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">${customer.customerName}</h5>
                            <p class="card-text">Customer ID: ${customer.customerId}</p>
                            <p class="card-text">Address: ${customer.customerAddress}</p>
                            <p class="card-text">Status: ${customer.customerStatus}</p>
                            <!-- Add more fields as needed -->
                        </div>
                    </div>
                </div>
            `;
            // Append card HTML to container
            customerCardsContainer.innerHTML += cardHtml;
        });
    }

    // Call fetchCustomerDetails function when page loads
    fetchCustomerDetails(1); // Example customer ID
</script>

</body>
</html>
